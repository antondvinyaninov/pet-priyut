# –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤

## –¶–µ–ª—å
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∂–∞—Ç–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –º–µ—Å—Ç–∞ –∏ —É—Å–∫–æ—Ä–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã.

## 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∂–∏–≤–æ—Ç–Ω—ã—Ö
- **–§–æ—Ä–º–∞—Ç:** –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP (–ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∫–∞—á–µ—Å—Ç–≤–∞)
- **–†–∞–∑–º–µ—Ä—ã:**
  - –û—Ä–∏–≥–∏–Ω–∞–ª: —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–¥–ª—è –ø–µ—á–∞—Ç–∏ –∫–∞—Ä—Ç–æ—á–µ–∫)
  - –ü—Ä–µ–≤—å—é –¥–ª—è —Å–ø–∏—Å–∫–∞: 300x300px
  - –î–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ: 800x800px
- **–ö–∞—á–µ—Å—Ç–≤–æ:** 85% (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å)
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** Intervention Image (—É–∂–µ –µ—Å—Ç—å –≤ Laravel)

### –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Å–ø—Ä–∞–≤–∫–∏ –∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã (—Å–∫–∞–Ω—ã)
- **–§–æ—Ä–º–∞—Ç:** JPEG —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
- **–ö–∞—á–µ—Å—Ç–≤–æ:** 90% (–≤–∞–∂–Ω–∞ —á–∏—Ç–∞–µ–º–æ—Å—Ç—å)
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä:** 1920px –ø–æ –¥–ª–∏–Ω–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ

## 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ

### –í–∏–¥–µ–æ –≤—ã–µ–∑–¥–æ–≤

#### –í–∞—Ä–∏–∞–Ω—Ç 1: Telegram-style (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **–§–æ—Ä–º–∞—Ç:** MP4 (H.264) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** 
  - –ï—Å–ª–∏ –±–æ–ª—å—à–µ 1280px ‚Üí —Å–∂–∞—Ç—å –¥–æ 1280px –ø–æ –¥–ª–∏–Ω–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ
  - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø—Ä–æ–ø–æ—Ä—Ü–∏–∏
- **–ë–∏—Ç—Ä–µ–π—Ç:** 
  - 720p: 800 Kbps
  - 1080p: 1500 Kbps
  - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π (VBR - Variable Bit Rate)
- **FPS:** –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ 30 fps
- **–ö–∞—á–µ—Å—Ç–≤–æ:** CRF 23 (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å)
- **–ö–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ:** 2-pass –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 5 –º–∏–Ω FullHD ‚âà 30-50MB (—ç–∫–æ–Ω–æ–º–∏—è 75-85%)

#### –í–∞—Ä–∏–∞–Ω—Ç 2: WebM (–¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç–∫–æ–Ω–æ–º–∏–∏)
- **–§–æ—Ä–º–∞—Ç:** WebM (VP9)
- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:** –¥–æ 1280px
- **–ë–∏—Ç—Ä–µ–π—Ç:** 500-1000 Kbps (VP9 —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–µ)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** 5 –º–∏–Ω FullHD ‚âà 20-40MB (—ç–∫–æ–Ω–æ–º–∏—è 80-90%)
- **–ú–∏–Ω—É—Å:** –î–æ–ª—å—à–µ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **Telegram-style (H.264)** –ø–æ—Ç–æ–º—É —á—Ç–æ:
- ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ (–¥–∞–∂–µ –Ω–∞ —Å—Ç–∞—Ä—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö)
- ‚úÖ –û—Ç–ª–∏—á–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–æ/—Ä–∞–∑–º–µ—Ä
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–º–∏–ª–ª–∏–∞—Ä–¥—ã –≤–∏–¥–µ–æ –≤ Telegram)

#### FFmpeg –∫–æ–º–∞–Ω–¥–∞ (Telegram-style)
```bash
ffmpeg -i input.mp4 \
  -c:v libx264 \
  -preset medium \
  -crf 23 \
  -vf "scale='min(1280,iw)':'min(1280,ih)':force_original_aspect_ratio=decrease" \
  -r 30 \
  -c:a aac \
  -b:a 128k \
  -movflags +faststart \
  output.mp4
```

- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞:** FFmpeg
- **–û–±—Ä–∞–±–æ—Ç–∫–∞:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å (—á—Ç–æ–±—ã –Ω–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É)

## 3. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –≠—Ç–∞–ø 1: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
```php
// app/Services/ImageOptimizationService.php
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ–≤—å—é
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ WebP
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞ –¥–ª—è –ø–µ—á–∞—Ç–∏
- –£–¥–∞–ª–µ–Ω–∏–µ EXIF –¥–∞–Ω–Ω—ã—Ö (–∫—Ä–æ–º–µ –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏–∏)
```

### –≠—Ç–∞–ø 2: –í–∏–¥–µ–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
```php
// app/Jobs/OptimizeVideoJob.php
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —á–µ—Ä–µ–∑ –æ—á–µ—Ä–µ–¥—å
- –°–∂–∞—Ç–∏–µ –¥–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ –±–∏—Ç—Ä–µ–π—Ç–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–≤—å—é (–ø–µ—Ä–≤—ã–π –∫–∞–¥—Ä)
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
```

### –≠—Ç–∞–ø 3: –î–æ–∫—É–º–µ–Ω—Ç—ã
```php
// app/Services/DocumentOptimizationService.php
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è PDF (–µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è)
- –°–∂–∞—Ç–∏–µ JPEG —Å–∫–∞–Ω–æ–≤
```

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
```
storage/app/public/
‚îú‚îÄ‚îÄ animals/
‚îÇ   ‚îú‚îÄ‚îÄ originals/      # –û—Ä–∏–≥–∏–Ω–∞–ª—ã (–¥–ª—è –ø–µ—á–∞—Ç–∏)
‚îÇ   ‚îú‚îÄ‚îÄ large/          # 800x800 (–¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫)
‚îÇ   ‚îî‚îÄ‚îÄ thumbnails/     # 300x300 (–¥–ª—è —Å–ø–∏—Å–∫–æ–≤)
‚îú‚îÄ‚îÄ videos/
‚îÇ   ‚îú‚îÄ‚îÄ originals/      # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
‚îÇ   ‚îú‚îÄ‚îÄ optimized/      # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ MP4 (Telegram-style)
‚îÇ   ‚îî‚îÄ‚îÄ thumbnails/     # –ü—Ä–µ–≤—å—é –≤–∏–¥–µ–æ
‚îî‚îÄ‚îÄ documents/
    ‚îú‚îÄ‚îÄ originals/      # –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    ‚îî‚îÄ‚îÄ optimized/      # –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ
```

## 5. –≠–∫–æ–Ω–æ–º–∏—è –º–µ—Å—Ç–∞

### –ü—Ä–∏–º–µ—Ä–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã
**–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- –§–æ—Ç–æ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ (–æ—Ä–∏–≥–∏–Ω–∞–ª): 5MB
- 263 –∂–∏–≤–æ—Ç–Ω—ã—Ö √ó 2 —Ñ–æ—Ç–æ = 2.6GB

**–° –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π:**
- –û—Ä–∏–≥–∏–Ω–∞–ª: 5MB (—Å–æ—Ö—Ä–∞–Ω—è–µ–º)
- WebP large: 200KB
- WebP thumbnail: 50KB
- –ò—Ç–æ–≥–æ –Ω–∞ –∂–∏–≤–æ—Ç–Ω–æ–µ: ~5.25MB
- 263 –∂–∏–≤–æ—Ç–Ω—ã—Ö √ó 2 —Ñ–æ—Ç–æ = 2.76GB

**–ù–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º WebP:**
- –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: 50KB –≤–º–µ—Å—Ç–æ 5MB (–≤ 100 —Ä–∞–∑ –±—ã—Å—Ç—Ä–µ–µ!)

**–í–∏–¥–µ–æ (Telegram-style):**
- –û—Ä–∏–≥–∏–Ω–∞–ª FullHD 5 –º–∏–Ω: 200MB
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ (H.264, CRF 23, 1280px): 30-50MB
- **–≠–∫–æ–Ω–æ–º–∏—è: 75-85%**
- –ö–∞—á–µ—Å—Ç–≤–æ: –æ—Ç–ª–∏—á–Ω–æ–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ WebM:**
- WebM (VP9): 20-40MB (—ç–∫–æ–Ω–æ–º–∏—è 80-90%)
- –ù–æ –¥–æ–ª—å—à–µ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –∏ –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ —Å—Ç–∞—Ä—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## 6. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

1. ‚úÖ **–í—ã—Å–æ–∫–∏–π:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–æ—Ç–æ –∂–∏–≤–æ—Ç–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ)
2. ‚ö†Ô∏è **–°—Ä–µ–¥–Ω–∏–π:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤–∏–¥–µ–æ (–±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã, –Ω–æ —Ä–µ–∂–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è)
3. üìã **–ù–∏–∑–∫–∏–π:** –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–µ—Å–ª–∏ –±—É–¥—É—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å –º–µ—Å—Ç–æ–º)

## 7. –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã

```bash
# –î–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (—É–∂–µ –µ—Å—Ç—å –≤ Laravel)
composer require intervention/image

# –î–ª—è –≤–∏–¥–µ–æ (—Ç—Ä–µ–±—É–µ—Ç FFmpeg –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
composer require pbmedia/laravel-ffmpeg
apt-get install ffmpeg  # –≤ Dockerfile
```

## 8. –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:
```bash
php artisan optimize:existing-images
php artisan optimize:existing-videos
```

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –û—Ä–∏–≥–∏–Ω–∞–ª—ã –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è (–¥–ª—è –ø–µ—á–∞—Ç–∏ –∫–∞—Ä—Ç–æ—á–µ–∫)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –î–ª—è –≤–∏–¥–µ–æ - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- WebP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤—Å–µ–º–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
